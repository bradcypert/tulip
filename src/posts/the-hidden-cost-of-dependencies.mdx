---
title: "The Hidden Cost of Dependencies"
date: 2020/12/20
status: draft
author: "Brad Cypert"
excerpt: ""
type: post
id: 3405
thumbnail: ../images/green-artichoke-on-gray-round-plate-3647046.jpg
category:
  - meta
tag:
  - meta
---

Stop. Wait. Don't do it. Don't `npm install that_hot_new_thing`. You probably don't need it. Did you know that modern browsers support the INTL (Internationalization) API? This means you (probably*) don't need momentjs or dayjs anymore. This means that the users browser is configured so that your one line of code can do what the 11kb of momentjs's library does. "Well, alright, lemme install Redux and get this party started." No. Stop. What are you building? Do you _NEED_ redux? Did you know that React has the context API that can help you with global state management? You're already using React so maybe your TODO list app doesn't need something as hefty as Redux.

If the ask isn't obvious, I'd like for you to thoughtfully consider whether you really need to add another dependency to your project. Unfortunately, adding a dependency is significantly easier than maintaining that dependency or later removing it, so there's a tendency to install a dependency to solve your problems, especially when you're trying to move fast in a sprint or project.

There are exceptions to this philosophy, of course. React itself is a dependency, but the calibre of that dependency is significantly different than using MomentJS for date formatting. Where MomentJS is specifically used for date-related pieces, React spans across your entire application. Generally, when the benefit spans across your entire project, I'd consider that dependency to be a "framework" instead of a "library", however, the React development team is fairly adamant about React being a library (and I can respect that, too). This does pose the question -- Should we differentiate between frameworks and libraries when it comes to dependencies?

### Frameworks vs Libraries
You can argue the semantics of a framework vs a library as much as you'd like, but for the sake of this post, I'm going to declare that a framework is a library that asks you incorporate into a large part of your application. Additionally, the general purpose of such a framework is to help you build a harder/better/faster/stronger application. This classification seems fitting for most existing frameworks (Rails, Express, Angular, Ember are all still frameworks by this definition). However, this opens up the possibility for libraries to be considered frameworks depending on how they are used.

For the sake of this post, a library is something that takes some time to remove. A framework is something that usually requires a "rewrite" as opposed to a small amount of time. This means that, in your application, React can become a framework. This means that Redux can become a framework. This means that JQuery can become a framework.

If the above paragraph wasn't clear, I'll reiterate. Frameworks can be extremely difficult to remove (or change, as this is what happens with major updates). Libraries can become frameworks with poor use of abstraction (letting Redux's tentacles get all up in your components, for example).

### Maintenance
Thankfully, over the past few years, several tools have been built that help us maintain our dependencies. Dependabot is great and was acquired by Github for even better integration with the repositories that we host there. However, while Dependabot is great for making a PR with a version bump, it is not great for testing that version or fixing issues while migrating to a new version. The onus for testing falls on you (you do have unit test, right?) and I still feel like we're quite a ways away from dependable automatic upgrade-paths.

This leaves the maintenance of these dependencies to you or your team. In practice, this means that dependencies linger and before you know it, your existing Rails 2.4 app withers away in the shadow of Rails 6.

### Nested Dependencies
Ah, the nested dependency. If dependencies are cockroaches, the nested dependnecy is the cockroaches' roaches. Nasty, right? Potentially. 

Nested dependencies can sneak in security vulnerabilities, massively increase your bundle size, and cause all the issues that normal dependencies can, but they're usually less obvious. How exciting!

So what makes the nested dependency such a pain? 

### 